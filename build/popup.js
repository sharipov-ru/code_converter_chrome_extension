// Generated by CoffeeScript 1.3.3
(function() {
  var NotificationView,
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  NotificationView = (function() {
    var HIDE_DELAY, SHOW_DELAY, TIMEOUT;

    SHOW_DELAY = 750;

    HIDE_DELAY = 750;

    TIMEOUT = 3000;

    function NotificationView(messageType, messageTitle, messageContent) {
      this.messageType = messageType;
      this.messageTitle = messageTitle;
      this.messageContent = messageContent;
      this.showNotification = __bind(this.showNotification, this);

      this.hasValidData = __bind(this.hasValidData, this);

    }

    NotificationView.prototype.hasValidData = function() {
      return this.messageType && this.messageTitle && this.messageContent;
    };

    NotificationView.prototype.showNotification = function() {
      var htmlElement;
      $("body").append("<div class='converter-" + this.messageType + " converter-message'>                        <h3>" + this.messageTitle + "</h3>                        <p>" + this.messageContent + "</p>                      </div>");
      htmlElement = $('.converter-error, .converter-success, .converter-info, .converter-warning');
      htmlElement.animate({
        top: "0"
      }, SHOW_DELAY);
      return setTimeout((function() {
        return htmlElement.animate({
          top: "-200"
        }, HIDE_DELAY);
      }), TIMEOUT);
    };

    return NotificationView;

  })();

  chrome.extension.sendMessage({
    method: "getConverterData"
  }, function(response) {
    var notification;
    notification = new NotificationView(response.type, response.title, response.content);
    if (notification.hasValidData()) {
      notification.showNotification();
    }
    return chrome.extension.sendMessage({
      method: "clearConverterData"
    });
  });

}).call(this);
